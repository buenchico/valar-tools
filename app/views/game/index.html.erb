<% provide(:title, "Configuración de partida") %>
<% provide(:icon, "fas fa-tachometer-alt") %>

<div class="tool-title">
    <i class="white <%= yield(:icon) %>"></i>
    <%= yield(:title) %>
</div>

<div class="card bg-secondary mb-3">
  <div class="card-body">
    <div class="card-text text-center">
        <%= button_to('Preparar partida nueva', set_active_game_path, method: :post, remote: true, class: 'btn btn-warning btn-lg') %>
    </div>
    <div class="row justify-content-center">
      <div id="newGame" class="card bg-primary mt-3 col-4" style="display: none">
        <div class="card-body">
          <div class="card-text">
              TEST
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div>
  <table class="table table-dark table-striped table-borderless table-hover table-sm table-responsive sortable">
    <caption>Lista de partidas</caption>
      <thead>
        <tr>
          <th scope="col" class="sorter-false" colspan="2">Nombre</th>
          <th scope="col">Herramientas <i class="fas fa-sort"></i></th>
          <th scope="col" class="sorter-font-awesome">¿Activa? <i class="fas fa-sort"></i></th>
          <th scope="col"></th>
        </tr>
      </thead>
      <tbody>
        <% @games.each do |game| %>
          <tr>
            <td><%= image_tag('/assets/' + game.icon, class: 'game-icon') %></td>
            <td><%= game.title %></td>
            <td>
              <% tools = [] %>
              <% game.tool.each do |tool|  %>
                <% tools << tool.short_title %>
              <% end %>
              <%= tools.join(',') %>
            </td>
            <td class="text-center">
              <% if game.active == true  %>
                <i class="fas fa-check"></i>
              <% else %>
                <i class="fas fa-times"></i>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
  </table>

  <table class="table table-dark table-striped table-borderless table-hover table-sm table-responsive sortable">
    <caption>Lista de herramientas</caption>
      <thead>
        <tr>
          <th scope="col" class="sorter-false" colspan="2">Nombre</th>
          <th scope="col">Partida <i class="fas fa-sort"></i></th>
          <th scope="col" class="sorter-font-awesome">¿Activa? <i class="fas fa-sort"></i></th>
          <th scope="col" class="sorter-font-awesome">¿Máster? <i class="fas fa-sort"></i></th>
          <th scope="col"></th>
        </tr>
      </thead>
      <tbody>
        <% @tools.each do |tool| %>
          <tr>
            <td><i class="<%= tool.icon %>"></i></td>
            <td><%= tool.short_title %></td>
            <td>
              <% games = [] %>
              <% tool.game.each do |game|  %>
                <% games << game.title %>
              <% end %>
              <%= games.join(',') %>
            </td>
            <td class="text-center">
              <% if tool.active == true  %>
                <i class="fas fa-check"></i>
              <% else %>
                <i class="fas fa-times"></i>
              <% end %>
            </td>
            <td class="text-center">
              <% if tool.master == true  %>
                <i class="fas fa-check"></i>
              <% else %>
                <i class="fas fa-times"></i>
              <% end %>
            </td>
            <td><%= link_to '', edit_tool_path(tool), remote: true, class: 'fas fa-edit white' %></td>
          </tr>
        <% end %>
      </tbody>
  </table>
</div>

<!-- Modal -->

<div id='tool-content'></div>
