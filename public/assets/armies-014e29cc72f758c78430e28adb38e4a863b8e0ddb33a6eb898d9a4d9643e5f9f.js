$(document).on("turbolinks:load",function(){$(function(){$(".copy").click(function(){var t="";$("input[type=checkbox]:visible:checked").each(function(){var e=$(this).closest("tr")[0];"table_title"!=$(this).closest("tr")[0].id&&(t+=e.cells[2].textContent,"n/a"!=e.cells[3].textContent&&(t+=" ("+e.cells[3].textContent+")"),"n/a"!=e.cells[4].textContent&&(t+=", en "+e.cells[4].textContent),"n/a"!=e.cells[5].textContent&&(t+=" ["+e.cells[5].textContent+"]"),t+=" FUE: "+e.cells[1].textContent,t+="\n")});var e=document.createElement("textarea");document.body.appendChild(e),e.value=t,e.select(),document.execCommand("copy"),document.body.removeChild(e)})})}),$.fn.armyFilters=function(t){var e=$("#filtertext-"+t).val().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),n=$("#filterselect-"+t).children("option:selected").val();$("#army_list-"+t).filterTable(e,n);var l=$('input[type="checkbox"]:visible').length-1;$("#count-visible").html(l)},$.fn.recalculateStats=function(){var t=$('input[type="checkbox"]:visible').length-1;$("#count-visible").html(t);var e=0;$(".strenght:visible").each(function(){e+=parseFloat($(this).text())}),$("#count-visible-strenght").html(e),$("#count-strenght").html(e)},$(document).on("turbolinks:load",function(){var t=["Inactivo","Master","Arryn","Baratheon","Connington","Frey","Grafton","Greyjoy","Hightower","Lannister","Martell","Stark","Targaryen","Tarly","Tully","Tyrell"];$.each(t,function(t,e){$("#filterselect-"+e).on("change",function(){$.fn.armyFilters(e),$.fn.recalculateStats()}),$("#filtertext-"+e).on("keyup",function(){$.fn.armyFilters(e),$.fn.recalculateStats()})})}),$(document).on("turbolinks:load",function(){$('a[data-toggle="tab"]').on("shown.bs.tab",function(){$.fn.recalculateStats()})}),$(document).on("turbolinks:load",function(){$(".best_in_place").bind("ajax:success",function(t,e){var n=JSON.parse(e).army.strenght,l=$(this).closest("tr")[0].cells[1].textContent;$("#count-strenght").html(parseInt($("#count-visible-strenght").text())+n-l),$(this).closest("tr")[0].cells[1].textContent=n,$.fn.recalculateStats();var o=JSON.parse(e).army.status;"Aniquilado"!==o?$(this).closest("tr").removeClass("destroyed"):$(this).closest("tr").addClass("destroyed"),"Movilizado"!==o?$(this).closest("tr").removeClass("mobilized"):$(this).closest("tr").addClass("mobilized")})});