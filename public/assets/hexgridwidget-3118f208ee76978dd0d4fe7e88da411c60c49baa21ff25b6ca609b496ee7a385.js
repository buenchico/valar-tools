$.fn.hexGridWidget=function(t,a,n,r){"use strict";var e=2*a+1,i=2*a+1,o=function(t){return $(document.createElementNS("http://www.w3.org/2000/svg",t||"svg"))};return $(this).each(function(){var d,h,c,s=$(this),u=function(){var t=$(this);s.trigger($.Event("hexclick",t.data()))},l=Math.sqrt(3)/2*t,x=$("#canvas").attr("tabindex",1).appendTo(s).css({width:(1.5*e+.5)*t+10,height:(2*i+1)*l+10}),M=function(t,a){return Math.round(t+c.x)+","+Math.round(a+c.y)};for(h=0;h<i;h++)for(d=0;d<e;d++){var g=d-a,p=h-(d-(1&d))/2-Math.ceil(a/2),f=Math.max(Math.abs(g),Math.abs(p),Math.abs(-g-p));f<=a&&(c={x:Math.round((1+1.5*d)*t)+5,y:Math.round(l*(1+2*h+d%2))+5},o("polygon").attr({points:[M(-1*t/2,-1*l),M(t/2,-1*l),M(t,0),M(t/2,l),M(-1*t/2,l),M(-1*t,0)].join(" "),"class":n,tabindex:1,id:g+"_"+p}).appendTo(x).data({center:c,row:h,column:d,q:g,r:p}).on("click",u).attr({q:g,r:p,ring:f}),o("text").attr({x:c.x,y:c.y+.9*l,"dominant-baseline":"middle","text-anchor":"middle","class":r,id:"text_"+g+"_"+p}).appendTo(x).html(g+","+p))}})};